<!DOCTYPE html>
<html>
<head>
    <title>What Pasta Are You?</title>

    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=Poppins:wght@400;600;700&display=swap" rel="stylesheet">
    <style>
        body {
            font-family: 'Poppins', sans-serif;
            max-width: 600px;
            margin: 50px auto;
            padding: 20px;
            background-color: #f5f5f5;
        }
        .question {
            background: white;
            padding: 20px;
            margin: 20px 0;
            border-radius: 8px;
            display: none;
            animation: slideIn 0.5s ease-in;
        }
        .question.active {
            display: block;
        }
        button {
            background-color: #4CAF50;
            color: white;
            padding: 15px 32px;
            font-size: 16px;
            border: none;
            border-radius: 4px;
            cursor: pointer;
            margin: 10px 5px;
            transition: all 0.3s ease;
        }
        button:hover {
            background-color: #8B4513;
            transform: scale(1.05);
        }
        #result {
            background: white;
            padding: 30px;
            border-radius: 8px;
            text-align: center;
            display: none;
            animation: fadeIn 1s ease-in;
        }
        #result.show {
            display: block;
        }
        @keyframes slideIn {
            from {
                opacity: 0;
                transform: translateX(-50px);
            }
            to {
                opacity: 1;
                transform: translateX(0);
            }
        }
        @keyframes fadeIn {
            from {
                opacity: 0;
                transform: scale(0.9);
            }
            to {
                opacity: 1;
                transform: scale(1);
            }
        }
        .progress {
            width: 100%;
            height: 10px;
            background: #ddd;
            border-radius: 5px;
            margin: 20px 0;
        }
        .progress-bar {
            height: 100%;
            background: #4CAF50;
            border-radius: 5px;
            transition: width 0.5s ease;
        }
    </style>
    <script src="https://cdn.jsdelivr.net/npm/canvas-confetti@1.6.0/dist/confetti.browser.min.js"></script>
</head>
<body>
    <h1>üçù What Pasta Shape Are You? üçù</h1>
    
    <div class="progress">
        <div class="progress-bar" id="progress" style="width: 0%"></div>
    </div>
    
    <div class="question active" id="q1">
        <h3>What's your ideal Friday night?</h3>
        <button onclick="answer(1, 'a')">Cozy night in with a book</button>
        <button onclick="answer(1, 'b')">Wild party with friends</button>
        <button onclick="answer(1, 'c')">Organized game night</button>
    </div>

    <div class="question" id="q2">
        <h3>Pick your weekend activity:</h3>
        <button onclick="answer(2, 'sports')">Playing sports</button>
        <button onclick="answer(2, 'cooking')">Cooking elaborate meals</button>
        <button onclick="answer(2, 'netflix')">Netflix marathon</button>
    </div>

    <div class="question" id="q3">
        <h3>Your favorite season?</h3>
        <button onclick="answer(3, 'spring')">Spring - new beginnings</button>
        <button onclick="answer(3, 'summer')">Summer - fun and energy</button>
        <button onclick="answer(3, 'fall')">Fall - cozy and comfortable</button>
    </div>

    <div id="result">
        <img id="pasta-image" src="" style="width: 100%; max-width: 400px; border-radius: 8px; margin: 20px 0;">
        <h2>You are: <span id="pasta-type"></span></h2>
        <p id="description"></p>
        <div style="margin-top: 30px;">
            <button onclick="shareToTwitter()" style="background-color: #1DA1F2;">
                üê¶ Share on Twitter
            </button>
            <button onclick="shareToFacebook()" style="background-color: #1877F2;">
                üìò Share on Facebook
            </button>
            <button onclick="shareToWhatsApp()" style="background-color: #25D366;">
                üí¨ Share on WhatsApp
            </button>
            <button onclick="copyToClipboard()">
                üìã Copy Result
            </button>
            <button onclick="downloadImage()" style="background-color: #E4405F;">
                üì∏ Save Image for IG/TikTok
            </button>
            <button onclick="restartQuiz()" style="background-color: #666;">
                üîÑ Take Again
            </button>
        </div>
        
        <p id="copy-message" style="color: #4CAF50; margin-top: 10px; display: none;">
            ‚úì Copied to clipboard!
        </p>
    </div>

    <script>
        let score = 0;
        let currentQuestion = 1;
        const totalQuestions = 3;
        
        function answer(questionNum, choice) {
            // Add to score
            const scores = {
                'a': 1, 'b': 3, 'c': 2,
                'sports': 3, 'cooking': 1, 'netflix': 2,
                'spring': 2, 'summer': 3, 'fall': 1
            };
            score += scores[choice];
            
            // Update progress bar
            const progress = (questionNum / totalQuestions) * 100;
            document.getElementById('progress').style.width = progress + '%';
            
            // Move to next question or show result
            if (questionNum < totalQuestions) {
                document.getElementById('q' + questionNum).classList.remove('active');
                document.getElementById('q' + (questionNum + 1)).classList.add('active');
            } else {
                showResult();
            }
        }
        
        function showResult() {
            // Hide all questions
            document.querySelectorAll('.question').forEach(q => q.style.display = 'none');
            document.querySelector('.progress').style.display = 'none';
            
            let pasta, description, imagePath;
            
            if (score <= 4) {
                pasta = "Fettuccine";
                description = "Long, elegant, and sophisticated. You appreciate the finer things in life.";
                imagePath = "images/fettuccine.jpg";
            } else if (score <= 7) {
                pasta = "Penne";
                description = "Structured and reliable. People can always count on you.";
                imagePath = "images/penne.jpg";
            } else {
                pasta = "Rotini";
                description = "Spiraled and full of energy! You bring excitement wherever you go.";
                imagePath = "images/rotini.jpg";
            }
            
            document.getElementById('pasta-image').src = imagePath;
            document.getElementById('pasta-type').textContent = pasta;
            document.getElementById('description').textContent = description;
            document.getElementById('result').classList.add('show');
            // Confetti celebration!
            confetti({
                particleCount: 100,
                spread: 70,
                origin: { y: 0.6 }
            });
        }

    function shareToTwitter() {
    const pasta = document.getElementById('pasta-type').textContent;
    const text = `I'm ${pasta} pasta! üçù What pasta are you?`;
    const url = window.location.href; // Current page URL
    const twitterUrl = `https://twitter.com/intent/tweet?text=${encodeURIComponent(text)}&url=${encodeURIComponent(url)}`;
    window.open(twitterUrl, '_blank');
    }

    function copyToClipboard() {
        const pasta = document.getElementById('pasta-type').textContent;
        const description = document.getElementById('description').textContent;
        const text = `I'm ${pasta} pasta! üçù\n${description}\n\nTake the quiz: ${window.location.href}`;
        
        navigator.clipboard.writeText(text).then(() => {
            // Show success message
            const message = document.getElementById('copy-message');
            message.style.display = 'block';
            setTimeout(() => {
                message.style.display = 'none';
            }, 3000); // Hide after 3 seconds
        });
    }

    function restartQuiz() {
        // Reset everything
        score = 0;
        document.getElementById('result').classList.remove('show');
        document.querySelector('.progress').style.display = 'block';
        document.getElementById('progress').style.width = '0%';
        document.getElementById('q1').classList.add('active');
        document.getElementById('q1').style.display = 'block';
    }

    function shareToFacebook() {
    const url = window.location.href;
    const facebookUrl = `https://www.facebook.com/sharer/sharer.php?u=${encodeURIComponent(url)}`;
    window.open(facebookUrl, '_blank');
    }

    function shareToWhatsApp() {
        const pasta = document.getElementById('pasta-type').textContent;
        const description = document.getElementById('description').textContent;
        const text = `I'm ${pasta} pasta! üçù ${description}\n\nTake the quiz: ${window.location.href}`;
        const whatsappUrl = `https://wa.me/?text=${encodeURIComponent(text)}`;
        window.open(whatsappUrl, '_blank');
    }

    function downloadImage() {
    const pasta = document.getElementById('pasta-type').textContent;
    const description = document.getElementById('description').textContent;
    const imgSrc = document.getElementById('pasta-image').src;
    
    // Create canvas
    const canvas = document.createElement('canvas');
    canvas.width = 1080;
    canvas.height = 1350; // Taller for better layout
    const ctx = canvas.getContext('2d');
    
    // Background gradient
    const gradient = ctx.createLinearGradient(0, 0, 0, 1350);
    gradient.addColorStop(0, '#4CAF50');
    gradient.addColorStop(1, '#2E7D32');
    ctx.fillStyle = gradient;
    ctx.fillRect(0, 0, 1080, 1350);
    
    // Load and draw pasta image
    const img = new Image();
    img.crossOrigin = 'anonymous';
    img.onload = function() {
        // Draw circular image in center
        ctx.save();
        ctx.beginPath();
        ctx.arc(540, 400, 250, 0, Math.PI * 2);
        ctx.closePath();
        ctx.clip();
        ctx.drawImage(img, 290, 150, 500, 500);
        ctx.restore();
        
        // White circle border
        ctx.strokeStyle = 'white';
        ctx.lineWidth = 10;
        ctx.beginPath();
        ctx.arc(540, 400, 250, 0, Math.PI * 2);
        ctx.stroke();
        
        // Title text
        ctx.fillStyle = 'white';
        ctx.font = 'bold 70px Arial';
        ctx.textAlign = 'center';
        ctx.fillText('I\'m ' + pasta + ' Pasta! üçù', 540, 750);
        
        // Description (wrap text)
        ctx.font = '35px Arial';
        const words = description.split(' ');
        let line = '';
        let y = 850;
        const maxWidth = 900; // Leave padding
        
        for (let i = 0; i < words.length; i++) {
            const testLine = line + words[i] + ' ';
            const metrics = ctx.measureText(testLine);
            if (metrics.width > maxWidth && i > 0) {
                ctx.fillText(line, 540, y);
                line = words[i] + ' ';
                y += 45;
            } else {
                line = testLine;
            }
        }
        ctx.fillText(line, 540, y);
        
        // Call to action
        ctx.font = 'bold 45px Arial';
        ctx.fillText('What pasta are you?', 540, 1150);
        
        // Add your quiz URL or handle (optional)
        ctx.font = '30px Arial';
        ctx.fillText('Take the quiz!', 540, 1220);
        
        // Download
        const link = document.createElement('a');
        link.download = 'my-pasta-result.png';
        link.href = canvas.toDataURL('image/png');
        link.click();
    };
    
    img.src = imgSrc;
    }
    </script>
</body>
</html>